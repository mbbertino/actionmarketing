var LoadedFile=Parse.Object.extend("Files"),LoadedFileCollection=Parse.Collection.extend({model:LoadedFile}),MainRouter=Backbone.Router.extend({routes:{"":"home",services:"services","services/:id":"services","client-login":"login","client-login/:user":"fileUpload",contact:"contact"},initialize:function(){},home:function(){new AppView},services:function(a){new ServicesView({serviceId:a})},login:function(){Parse.User.current()?window.router.navigate("/client-login/"+Parse.User.current().attributes.username,{trigger:!0}):new LoginView},fileUpload:function(){Parse.User.current()?new FilePortalView({model:Parse.User.current()}):window.router.navigate("/client-login",{trigger:!0})},contact:function(){}});$(document).ready(function(){Parse.initialize("0NPDH9dF1j1bzL7Np4qyhwrEklrhRufzbFtSzcQ5","oS05oUW4w641gXfBU8HtgIgLNktILc5lgGfAFHHs"),window.router=new MainRouter,Backbone.history.start()});var AppView=Backbone.View.extend({renderedTemplate:_.template($("#appview-template").text()),events:{"click .js-all-services":"services","click .js-nav-one":"moveToOne","click .js-nav-two":"moveToTwo","click .js-nav-three":"moveToThree"},initialize:function(){$(".content-wrapper").html(this.el),this.render(),$(".link").removeClass("link-border"),$(".link-home").addClass("link-border")},services:function(){window.router.navigate("/services",{trigger:!0}),$("html, body").animate({scrollTop:0},1e3)},moveToOne:function(){window.router.navigate("/services",{trigger:!0}),$("html, body").animate({scrollTop:0},1e3)},moveToTwo:function(){window.router.navigate("/services",{trigger:!0}),$(".js-nav-two").trigger("click")},moveToThree:function(){window.router.navigate("/services",{trigger:!0}),$(".js-nav-three").trigger("click")},render:function(){this.$el.html(this.renderedTemplate())}}),ServicesView=Backbone.View.extend({renderedTemplate:_.template($("#services-template").text()),events:{"click .js-nav-one":"moveToOne","click .js-nav-two":"moveToTwo","click .js-nav-three":"moveToThree"},initialize:function(){$(".content-wrapper").html(this.el),this.render(),$(".link").removeClass("link-border"),$(".link-services").addClass("link-border"),doThisStuffOnScroll=function(){var a=document.documentElement.scrollTop||document.body.scrollTop;a>140?($(".docs-sidebar").removeClass("affix-top"),$(".docs-sidebar").addClass("affix")):($(".docs-sidebar").removeClass("affix"),$(".docs-sidebar").addClass("affix-top"))},window.onscroll=doThisStuffOnScroll},moveToOne:function(){$("html, body").animate({scrollTop:0},1e3)},moveToTwo:function(){$("html, body").animate({scrollTop:$("#fill").offset().top-15},1e3)},moveToThree:function(){$("html, body").animate({scrollTop:$("#data").offset().top-15},1e3)},render:function(){this.$el.html(this.renderedTemplate())}}),LoginView=Backbone.View.extend({renderedTemplate:_.template($("#login-template").text()),events:{"click .js-login":"login"},initialize:function(){$(".content-wrapper").html(this.el),this.render(),$(".link").removeClass("link-border"),$(".link-client").addClass("link-border")},login:function(){Parse.User.logIn($(".username").val(),$(".password").val(),{success:function(a){console.log(a),window.router.navigate("/client-login/"+a.attributes.username,{trigger:!0})},error:function(){}})},render:function(){this.$el.html(this.renderedTemplate())}}),FilePortalView=Backbone.View.extend({className:"upload-wrapper col-xs-12",renderedTemplate:_.template($("#fileportal-template").text()),events:{"click .js-upload":"save"},initialize:function(){$(".content-wrapper").html(this.el),this.render(),$(".link").removeClass("link-border"),$(".link-client").addClass("link-border");var a=new Parse.Query("Files");a.find({success:function(a){_.each(a,function(a){new FileView({model:a})})}})},save:function(){var a=$("#file-upload-input")[0];if(a.files.length>0)var b=a.files[0],c=b.name,d=new Parse.File(c,b);d.save().then(function(){var a=new LoadedFile,b=(new Date).getTime();a.set("file",d),a.set("fileName",c),a.set("tStamp",b),a.set("clientName",Parse.User.current().attributes.username);var e=new Parse.ACL(Parse.User.current());e.setRoleReadAccess("Admin",!0),e.setRoleWriteAccess("Admin",!0),a.setACL(e),a.save(null,{success:function(){alert("File succesfully uploaded.")}})},function(){alert("file unable to upload")})},render:function(){this.$el.html(this.renderedTemplate())}}),FileView=Backbone.View.extend({renderedTemplate:_.template($("#file-view-template").text()),events:{},initialize:function(){$(".file-list ").append(this.el),this.render(),console.log(this.model)},render:function(){this.$el.html(this.renderedTemplate())}});